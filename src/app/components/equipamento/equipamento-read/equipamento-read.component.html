<div class="content" fxLayout="column">
  <div fxLayout="row wrap" class="configuration-container">
    <div class="text-pesquisa-container text-bold">
      <h3 class="h3-pesquisa">Pesquisar Por:</h3>
    </div>
    <section fxFlex>
      <mat-checkbox
        class="check-margin"
        (change)="checkEmpresaChange()"
        [(ngModel)]="PesquisaPorEmpresa"
        >Empresa</mat-checkbox
      >
      <mat-checkbox
        class="check-margin"
        (change)="checkTipoChange()"
        [(ngModel)]="PesquisaPorTipo"
        >Tipo Equipamento</mat-checkbox
      >
    </section>
    <section fxFlex>
      <div fxLayout="row wrap">
        <div class="text-bold">
          <h3>Incluir:</h3>
        </div>
        <div>
          <mat-checkbox class="check-margin" [(ngModel)]="SomenteInspecionados"
            >Inspecionados</mat-checkbox
          >
          <mat-checkbox
            class="check-margin"
            [(ngModel)]="SomenteNotInspecionados"
            >Não Inpsecionados</mat-checkbox
          >
        </div>
      </div>
    </section>
  </div>

  <div class="form-container">
    <div fxLayout="row wrap">
      <div fxFlex *ngIf="PesquisaPorEmpresa">
        <form [formGroup]="formEmp">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Nome</mat-label>
            <input
              matInput
              type="text"
              placeholder="Pesquisar"
              name="pequisa"
              formControlName="razaoSocial"
              [matAutocomplete]="auto2"
            />
          </mat-form-field>
          <mat-autocomplete autoActiveFirstOption #auto2="matAutocomplete">
            <mat-option
              *ngFor="let option of filteredOptionsEmp | async"
              [value]="option.razaoSocial"
              (onSelectionChange)="getEmpresa(option)"
            >
              {{ option.razaoSocial }}
            </mat-option>
          </mat-autocomplete>
        </form>
      </div>
      <div fxFlex *ngIf="PesquisaPorTipo">
        <form [formGroup]="formTipoEquip">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Tipo Equipamento</mat-label>
            <input
              matInput
              type="text"
              placeholder="Pesquisar"
              name="tipo"
              formControlName="tipo"
              [(ngModel)]="filtrarLista"
              [matAutocomplete]="auto"
            />
            <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
              <mat-option
                *ngFor="let option of filteredOptionsTipos | async"
                [value]="option.tipo"
                (onSelectionChange)="getPerfil(option)"
              >
                {{ option.tipo }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </form>
      </div>
      <div fxFlex *ngIf="SomenteInspecionados || SomenteNotInspecionados">
        <p>Range de datas:</p>
        <form [formGroup]="RangeDatas">
          <div fxLayout="row wrap">
            <div fxFlex>
              <mat-form-field appearance="outline" class="input-duracao">
                <mat-label>Data Inicial:</mat-label>
                <input
                  matInput
                  type="text"
                  placeholder="Ex: 01/01/1900"
                  name="dataIni"
                  formControlName="dataIni"
                  [matDatepicker]="picker2"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="picker2"
                ></mat-datepicker-toggle>
                <mat-datepicker touchUi #picker2></mat-datepicker>
              </mat-form-field>
            </div>
            <div fxFlex>
              <mat-form-field appearance="outline" class="input-duracao">
                <mat-label>Data Final:</mat-label>
                <input
                  matInput
                  type="text"
                  placeholder="Ex: 01/01/1900"
                  name="dataFim"
                  formControlName="dataFim"
                  [matDatepicker]="picker1"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="picker1"
                ></mat-datepicker-toggle>
                <mat-datepicker (selectedChanged)="dataSelected($event)" touchUi #picker1></mat-datepicker>
              </mat-form-field>
            </div>
            <div fxFlex></div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="table-container" fxLayout="column">
    <div class="mat-elevation-z8">
      <div fxLayout="row">
        <span class="spacer-flex-right-left"></span>
        <div fxLayoutAlign="center center">
          <h2>EQUIPAMENTOS</h2>
        </div>
        <span class="spacer-flex-right-left"></span>
        <div class="btnExportar-container">
          <button
            mat-mini-fab
            color="primary"
            aria-label="Botão de exportar tabela"
            matTooltip="Exportar em Excel"
            (click)="ExportExcel()"
          >
            <mat-icon>description</mat-icon>
          </button>
        </div>
      </div>
      <div class="mat-elevation-z4">
        <table
          mat-table
          [dataSource]="dataSource"
          id="table-endereco"
        >
          <!-- id Column -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>#</th>
            <td mat-cell *matCellDef="let row">{{ row.id }}</td>
          </ng-container>

          <!-- Cep Column -->
          <ng-container matColumnDef="empresaClienteId">
            <th mat-header-cell *matHeaderCellDef>IDEmpresa</th>
            <td mat-cell *matCellDef="let row">{{ row.empresaClienteId }}</td>
          </ng-container>

          <!-- Cidade Column -->
          <ng-container matColumnDef="num_ext">
            <th mat-header-cell *matHeaderCellDef>Número</th>
            <td mat-cell *matCellDef="let row">{{ row.extintorDTO.num_ext }}</td>
          </ng-container>

          <!-- Bairo Column -->
          <ng-container matColumnDef="seloInmetro_ext">
            <th mat-header-cell *matHeaderCellDef>Selo</th>
            <td mat-cell *matCellDef="let row">{{ row.extintorDTO.seloInmetro_ext }}</td>
          </ng-container>

          <!-- Rua Column -->
          <ng-container matColumnDef="fabricante_ext">
            <th mat-header-cell *matHeaderCellDef>Fabricante</th>
            <td mat-cell *matCellDef="let row">{{ row.extintorDTO.fabricante_ext }}</td>
          </ng-container>

          <!-- Número Column -->
          <ng-container matColumnDef="tipo_ext">
            <th mat-header-cell *matHeaderCellDef>Tipo</th>
            <td mat-cell *matCellDef="let row">{{ row.extintorDTO.tipo_ext }}</td>
          </ng-container>

          <!-- Estado Column -->
          <ng-container matColumnDef="capacidade_ext">
            <th mat-header-cell *matHeaderCellDef>Capacidade</th>
            <td mat-cell *matCellDef="let row">{{ row.extintorDTO.capacidade_ext }}</td>
          </ng-container>

          <!-- Pais Column -->
          <ng-container matColumnDef="anoFabricacao_ext">
            <th mat-header-cell *matHeaderCellDef>Ano</th>
            <td mat-cell *matCellDef="let row">{{ row.extintorDTO.anoFabricacao_ext }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumns"
          ></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[10, 50, 100]" showFirstLastButtons></mat-paginator>
      </div>
    </div>
    <mat-divider></mat-divider>
  </div>
</div>
